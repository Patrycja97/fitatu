✅ DWA PRZYPADKI UŻYCIA (USE CASES)

1️⃣ USE CASE — Wysłanie listy zakupów do aplikacji partnerskiej

Aktorzy:
- Użytkownik Fitatu
- Aplikacja partnerska (Glovo / Lisek / InPost Fresh)
- API partnera (system zewnętrzny)
---------------------------------------------------------------------------------------
Opis:
Użytkownik wysyła przygotowaną w Fitatu listę zakupów do wybranej aplikacji zakupowej, aby automatycznie dodać produkty do koszyka.
---------------------------------------------------------------------------------------
Warunki wstępne:

Użytkownik posiada wygenerowaną listę zakupów.
Użytkownik ma zainstalowaną przynajmniej jedną aplikację partnerską.
Połączenie z API partnera jest dostępne.
---------------------------------------------------------------------------------------
Scenariusz główny:

Użytkownik otwiera „Listę zakupów” w Fitatu.
Użytkownik wybiera opcję „Wyślij listę do aplikacji zakupowej”.
System wyświetla listę dostępnych aplikacji (np. Lisek).
Użytkownik wybiera aplikację.
Fitatu wysyła listę zakupów do API partnera.
Aplikacja partnerska potwierdza dodanie produktów do koszyka.
Fitatu wyświetla komunikat: „Produkty zostały dodane do koszyka”.
Aplikacja zakupowa otwiera się automatycznie z wypełnionym koszykiem.
---------------------------------------------------------------------------------------
Scenariusze alternatywne:

1. Brak aplikacji partnerskiej
– System wyświetla komunikat: „Brak kompatybilnych aplikacji zakupowych”.

2. Brak produktu w sklepie partnera
– API zwraca błąd → Fitatu proponuje zamiennik z bazy.

3. Brak połączenia z API
– System informuje użytkownika: „Nie udało się połączyć — spróbuj ponownie”.
---------------------------------------------------------------------------------------
Warunki końcowe:
Produkty znajdują się w koszyku w aplikacji zakupowej i mogą zostać zamówione.
---------------------------------------------------------------------------------------

2️⃣ USE CASE — Powiadomienie o konieczności zamówienia zakupów

Aktorzy:
Użytkownik Fitatu
System Fitatu (moduł powiadomień)
---------------------------------------------------------------------------------------
Opis:
System przypomina użytkownikowi, że powinien zamówić produkty potrzebne do przygotowania posiłków zaplanowanych na następny dzień lub tydzień.
---------------------------------------------------------------------------------------
Warunki wstępne:

Użytkownik ma zaplanowane posiłki.
Włączone powiadomienia w aplikacji.
Zidentyfikowane braki w produktach.
---------------------------------------------------------------------------------------
Scenariusz główny:

System analizuje zaplanowane posiłki użytkownika.
System wykrywa brakujące produkty w lodówce/półce (według listy zakupów).
System wysyła powiadomienie push:
„Zamów produkty na jutrzejsze posiłki — kliknij, aby dodać do koszyka”.
Użytkownik klika powiadomienie.
Fitatu otwiera listę zakupów z opcją wysłania jej do aplikacji partnerskiej.
---------------------------------------------------------------------------------------
Scenariusze alternatywne:

A1. Powiadomienia są wyłączone → brak notyfikacji.

A2. Użytkownik odrzuca powiadomienie → brak działania systemu.
---------------------------------------------------------------------------------------
Warunki końcowe:
Użytkownik został poinformowany o konieczności zakupów i może wykonać zamówienie.
---------------------------------------------------------------------------------------

✅ KRYTERIA AKCEPTACJI

1️⃣ Wymaganie: Wysyłanie listy zakupów
---------------------------------------------------------------------------------------
1. Poprawne przesłanie listy do API partnera
* Given *
Użytkownik ma wygenerowaną listę zakupów i zainstalowaną aplikację partnerską.
* When *
Użytkownik wybiera opcję „Wyślij listę zakupów” i wybiera aplikację.
* Then *
System przesyła listę zakupów do API partnera we właściwym formacie.
---------------------------------------------------------------------------------------
2. Potwierdzenie dodania produktów
* Given *
Aplikacja partnerska potwierdziła przyjęcie produktów.
* When *
Fitatu otrzyma odpowiedź z API.
* Then *
System wyświetla komunikat: „Produkty zostały dodane do koszyka”.
---------------------------------------------------------------------------------------
3. Brak produktu w sklepie partnera
* Given *
Produkt jest niedostępny w sklepie partnera.
* When *
API zwróci błąd dotyczący produktu.
* Then *
Fitatu informuje użytkownika i wyświetla możliwe zamienniki.
---------------------------------------------------------------------------------------
4. Brak internetu
* Given *
Użytkownik wybiera opcję wysłania listy.
* When *
Urządzenie jest offline lub połączenie zostaje utracone.
* Then *
Fitatu wyświetla komunikat „Brak połączenia z internetem, spróbuj ponownie”.
---------------------------------------------------------------------------------------
5. Brak kompatybilnej aplikacji
* Given *
Użytkownik próbuje wysłać listę.
* When *
Na urządzeniu nie ma zainstalowanej żadnej aplikacji partnerskiej.
* Then *
Fitatu wyświetla komunikat „Brak kompatybilnych aplikacji zakupowych”.
---------------------------------------------------------------------------------------
6. Błąd po stronie aplikacji partnera
* Given *
System próbuje wysłać listę do API.
* When *
API nie odpowiada, przekracza czas odpowiedzi lub zwraca błąd serwera.
* Then *
Fitatu wyświetla komunikat „Usługa partnera jest chwilowo niedostępna”.
---------------------------------------------------------------------------------------

2️⃣ Wymaganie: Powiadomienie o zamówieniu zakupów
---------------------------------------------------------------------------------------
1. Wysłanie powiadomienia dla zaplanowanych posiłków
* Given *
Użytkownik posiada zaplanowane posiłki i brakujące produkty.
* When *
Zbliża się określona godzina wysyłki powiadomienia.
* Then *
System wysyła powiadomienie push o konieczności zamówienia zakupów.
---------------------------------------------------------------------------------------
2. Kliknięcie przenosi do listy zakupów
* Given *
Użytkownik kliknie powiadomienie.
* When *
Aplikacja otworzy ekran.
* Then *
Fitatu przenosi użytkownika do listy zakupów.
---------------------------------------------------------------------------------------
3. Wyłączone powiadomienia
* Given *
Użytkownik ma wyłączone powiadomienia (np. z powodu włączonego trybu "Nie przeszkadzać").
* When *
System próbuje wysłać notyfikację.
* Then *
Powiadomienie nie jest wyświetlane.
---------------------------------------------------------------------------------------
4. Brak uprawnień do wysyłania powiadomień
* Given *
Użytkownik wcześniej zablokował uprawnienia dla powiadomień od Fitatu.
* When *
System próbuje wysłać powiadomienie.
* Then *
Powiadomienie nie jest dostarczane.
---------------------------------------------------------------------------------------
5. Brak brakujących produktów
* Given *
Użytkownik zaplanował posiłki.
* When *
Użytkownik ma wszystkie potrzebne produkty (lista zakupów jest pusta).
* Then *
System nie wysyła powiadomienia o zakupach.
---------------------------------------------------------------------------------------
6. Brak zaplanowanych posiłków
* Given *
Użytkownik nie zaplanował żadnych posiłków.
* When *
Nadchodzi czas wysyłki powiadomienia.
* Then *
System nie generuje żadnej notyfikacji.
---------------------------------------------------------------------------------------
